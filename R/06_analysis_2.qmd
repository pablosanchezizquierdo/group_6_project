---
title: "06_analisys_2"
format: html
editor: visual
---
## Loading dataset

```{r}
tsv_file <- "../data/data_aumented.tsv"
data_augmented <- read_tsv(tsv_file, show_col_types = FALSE)
```


## Ploting Pathways

```{r}
# Directly use filtering in the plotting pipeline
ggplot(data_augmented %>%
         filter(!is.na(`Compound Name`) & !is.na(Pathway_Info)) %>%
         count(`Compound Name`, Pathway_Info) %>%
         group_by(`Compound Name`) %>%
         mutate(Proportion = n / sum(n)), 
       aes(fill = Pathway_Info, y = Proportion, x = `Compound Name`)) +
  geom_bar(position = "fill", stat = "identity") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(title = "Proportion of Pathways for Each Compound",
       x = "Compound",
       y = "Proportion")
```
